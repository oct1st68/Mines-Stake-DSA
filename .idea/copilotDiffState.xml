<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="CopilotDiffPersistence">
    <option name="pendingDiffs">
      <map>
        <entry key="$PROJECT_DIR$/src/observer/IGameObserver.java">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/src/observer/IGameObserver.java" />
              <option name="updatedContent" value="package observer;&#10;&#10;import logic.Board;&#10;&#10;/**&#10; * Observer Pattern - Interface for game observers.&#10; * UI components implement this to receive game state updates.&#10; */&#10;public interface IGameObserver {&#10;&#10;    /**&#10;     * Called when a tile is opened.&#10;     * @param row Row of the opened tile&#10;     * @param col Column of the opened tile&#10;     * @param isMine Whether the tile was a mine&#10;     */&#10;    void onTileOpened(int row, int col, boolean isMine);&#10;&#10;    /**&#10;     * Called when the game ends.&#10;     * @param won true if player won, false if hit mine&#10;     */&#10;    void onGameOver(boolean won);&#10;&#10;    /**&#10;     * Called when the board state is updated.&#10;     * @param board The updated board&#10;     */&#10;    void onBoardUpdated(Board board);&#10;&#10;    /**&#10;     * Called when multiplier changes.&#10;     * @param multiplier Current multiplier value&#10;     */&#10;    void onMultiplierChanged(double multiplier);&#10;&#10;    /**&#10;     * Called when game state changes.&#10;     * @param stateName Name of the new state&#10;     */&#10;    void onStateChanged(String stateName);&#10;}&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/src/util/GameCalculator.java">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/src/util/GameCalculator.java" />
              <option name="updatedContent" value="package util;&#10;&#10;import logic.Board;&#10;&#10;/**&#10; * Single Responsibility Principle - Only handles multiplier calculations.&#10; * Uses probability-based formula for fair multiplier calculation.&#10; */&#10;public class GameCalculator {&#10;    &#10;    private static final double HOUSE_EDGE = 0.01; // 1% house edge&#10;&#10;    /**&#10;     * Calculate the current multiplier based on opened tiles.&#10;     * Formula: Multiplier = Multiplier_current Ã— (TotalTiles - OpenedTiles) / (TotalTiles - OpenedTiles - Mines)&#10;     * &#10;     * @param totalTiles Total number of tiles (25 for 5x5)&#10;     * @param numMines Number of mines&#10;     * @param openedTiles Number of safely opened tiles&#10;     * @return Current multiplier&#10;     */&#10;    public static double calculateMultiplier(int totalTiles, int numMines, int openedTiles) {&#10;        if (openedTiles == 0) {&#10;            return 1.0;&#10;        }&#10;&#10;        double multiplier = 1.0;&#10;        int safeTiles = totalTiles - numMines;&#10;&#10;        // Calculate cumulative probability&#10;        for (int i = 0; i &lt; openedTiles; i++) {&#10;            int remainingTiles = totalTiles - i;&#10;            int remainingSafe = safeTiles - i;&#10;            &#10;            // Probability of hitting safe tile&#10;            double probability = (double) remainingSafe / remainingTiles;&#10;            &#10;            // Inverse probability gives the multiplier increment&#10;            multiplier *= (1.0 / probability);&#10;        }&#10;&#10;        // Apply house edge&#10;        multiplier *= (1 - HOUSE_EDGE);&#10;&#10;        return Math.round(multiplier * 100.0) / 100.0; // Round to 2 decimal places&#10;    }&#10;&#10;    /**&#10;     * Calculate multiplier for next tile if revealed safely.&#10;     */&#10;    public static double calculateNextMultiplier(int totalTiles, int numMines, int openedTiles) {&#10;        return calculateMultiplier(totalTiles, numMines, openedTiles + 1);&#10;    }&#10;&#10;    /**&#10;     * Calculate potential payout.&#10;     */&#10;    public static double calculatePayout(double betAmount, double multiplier) {&#10;        return betAmount * multiplier;&#10;    }&#10;&#10;    /**&#10;     * Calculate the probability of hitting a mine on next click.&#10;     */&#10;    public static double calculateMineChance(int totalTiles, int numMines, int openedTiles) {&#10;        int remainingTiles = totalTiles - openedTiles;&#10;        return (double) numMines / remainingTiles;&#10;    }&#10;&#10;    /**&#10;     * Calculate the probability of hitting a safe tile on next click.&#10;     */&#10;    public static double calculateSafeChance(int totalTiles, int numMines, int openedTiles) {&#10;        return 1.0 - calculateMineChance(totalTiles, numMines, openedTiles);&#10;    }&#10;&#10;    /**&#10;     * Get multiplier table for a specific mine count.&#10;     */&#10;    public static double[] getMultiplierTable(int numMines) {&#10;        int totalTiles = Board.TOTAL_TILES;&#10;        int maxReveals = totalTiles - numMines;&#10;        double[] table = new double[maxReveals];&#10;&#10;        for (int i = 0; i &lt; maxReveals; i++) {&#10;            table[i] = calculateMultiplier(totalTiles, numMines, i + 1);&#10;        }&#10;&#10;        return table;&#10;    }&#10;}&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/src/util/Wallet.java">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/src/util/Wallet.java" />
              <option name="updatedContent" value="package util;&#10;&#10;/**&#10; * Single Responsibility Principle - Only handles wallet/balance operations.&#10; * Manages player's balance and betting.&#10; */&#10;public class Wallet {&#10;    private double balance;&#10;    private double currentBet;&#10;    private boolean betPlaced;&#10;&#10;    public Wallet(double initialBalance) {&#10;        if (initialBalance &lt; 0) {&#10;            throw new IllegalArgumentException(&quot;Initial balance cannot be negative&quot;);&#10;        }&#10;        this.balance = initialBalance;&#10;        this.currentBet = 0;&#10;        this.betPlaced = false;&#10;    }&#10;&#10;    /**&#10;     * Place a bet. Deducts from balance.&#10;     * @param amount Bet amount&#10;     * @return true if bet was placed successfully&#10;     */&#10;    public boolean placeBet(double amount) {&#10;        if (amount &lt;= 0) {&#10;            throw new IllegalArgumentException(&quot;Bet amount must be positive&quot;);&#10;        }&#10;        if (amount &gt; balance) {&#10;            return false; // Insufficient funds&#10;        }&#10;&#10;        balance -= amount;&#10;        currentBet = amount;&#10;        betPlaced = true;&#10;        return true;&#10;    }&#10;&#10;    /**&#10;     * Cash out with the given multiplier.&#10;     * @param multiplier The multiplier to apply&#10;     * @return The total payout&#10;     */&#10;    public double cashOut(double multiplier) {&#10;        if (!betPlaced) {&#10;            throw new IllegalStateException(&quot;No bet has been placed&quot;);&#10;        }&#10;&#10;        double payout = currentBet * multiplier;&#10;        balance += payout;&#10;        &#10;        // Reset bet&#10;        currentBet = 0;&#10;        betPlaced = false;&#10;&#10;        return payout;&#10;    }&#10;&#10;    /**&#10;     * Player loses the bet (hit a mine).&#10;     */&#10;    public void loseBet() {&#10;        // Bet was already deducted when placed&#10;        currentBet = 0;&#10;        betPlaced = false;&#10;    }&#10;&#10;    /**&#10;     * Reset current bet without affecting balance.&#10;     */&#10;    public void resetBet() {&#10;        if (betPlaced) {&#10;            balance += currentBet; // Refund&#10;        }&#10;        currentBet = 0;&#10;        betPlaced = false;&#10;    }&#10;&#10;    public double getBalance() {&#10;        return balance;&#10;    }&#10;&#10;    public double getCurrentBet() {&#10;        return currentBet;&#10;    }&#10;&#10;    public boolean isBetPlaced() {&#10;        return betPlaced;&#10;    }&#10;&#10;    public void addBalance(double amount) {&#10;        if (amount &gt; 0) {&#10;            balance += amount;&#10;        }&#10;    }&#10;}&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
      </map>
    </option>
  </component>
</project>